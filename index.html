<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>„É¥„Ç°„É≥„Éë„Ç§„Ç¢ÂÖ®Áü•ÂÖ®ËÉΩ ËæûÂÖ∏</title>

<style>
:root{
  --bg:#0b0f14;
  --panel:#151822;
  --panel2:#0f1320;
  --border:#252a36;
  --text:#e6e8ee;
  --muted:#9aa0aa;
  --muted2:#7b8192;

  --accent:#7b5cff;
  --accent2:#36d1dc;
  --accent3:#fb7185;

  --radius:16px;
  --shadow: 0 18px 65px rgba(0,0,0,.45);
}

*{box-sizing:border-box}

body{
  background:
    radial-gradient(1200px 700px at 10% 10%, rgba(123,92,255,.22), transparent 55%),
    radial-gradient(900px 600px at 90% 15%, rgba(54,209,220,.16), transparent 55%),
    radial-gradient(900px 650px at 20% 90%, rgba(251,113,133,.12), transparent 55%),
    var(--bg);
  color:var(--text);
  font-family:"Yu Gothic","Hiragino Kaku Gothic ProN",system-ui,sans-serif;
  margin:0;
  line-height:1.95;
}

header{
  position:sticky;
  top:0;
  z-index:10;
  background: rgba(11,15,20,.72);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  border-bottom:1px solid var(--border);
}

.topbar{
  max-width:1150px;
  margin:auto;
  padding:18px 18px 12px;
  display:flex;
  gap:18px;
  align-items:flex-start;
  justify-content:space-between;
  flex-wrap:wrap;
}

.brand{
  min-width:280px;
}
.brand .t{
  font-size:20px;
  font-weight:800;
  letter-spacing:1.4px;
}
.brand .s{
  margin-top:6px;
  color:var(--muted);
  font-size:13px;
}
.brand .s span{
  color:var(--muted2);
}

nav{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  align-items:center;
  justify-content:flex-end;
}

.tabbtn{
  cursor:pointer;
  border:1px solid var(--border);
  background: rgba(255,255,255,.05);
  color:var(--muted);
  padding:9px 12px;
  border-radius:999px;
  font-size:13px;
  user-select:none;
  transition: transform .08s ease, background .2s ease, color .2s ease, border-color .2s ease;
  box-shadow: var(--shadow);
}
.tabbtn:active{ transform: translateY(1px); }

.tabbtn.active{
  color:var(--text);
  border-color: rgba(54,209,220,.35);
  background:
    linear-gradient(90deg,
      rgba(123,92,255,.18),
      rgba(54,209,220,.15),
      rgba(251,113,133,.12)
    );
}

.container{
  max-width:1150px;
  margin:auto;
  padding:34px 18px 90px;
}

.section{ display:none; }
.section.active{ display:block; }

.grid{
  display:grid;
  grid-template-columns: 1.15fr .85fr;
  gap:16px;
}
@media (max-width: 980px){
  .grid{ grid-template-columns: 1fr; }
}

.panel{
  background: rgba(255,255,255,.06);
  border:1px solid var(--border);
  border-radius:22px;
  padding:16px;
  box-shadow: var(--shadow);
}

.panel h2{
  margin: 0 0 8px;
  font-size: 15px;
  letter-spacing:.6px;
}
.hint{
  color:var(--muted);
  font-size:13px;
  margin-top:0;
}

.searchbox{
  margin-top:12px;
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}
.searchbox input{
  flex: 1 1 320px;
  padding:12px 14px;
  border-radius:14px;
  border:1px solid var(--border);
  background: rgba(255,255,255,.06);
  color:var(--text);
  outline:none;
}
.searchbox input::placeholder{ color:var(--muted2); }

.row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  flex-wrap:wrap;
}
.toggle{
  display:flex;
  align-items:center;
  gap:8px;
  color:var(--muted);
  font-size:12px;
}
.toggle input{ transform: translateY(1px); }

.card{
  background: rgba(255,255,255,.07);
  border:1px solid var(--border);
  border-radius: var(--radius);
  padding:16px;
  margin-top:12px;
}

.card.exact{
  border-color: rgba(54,209,220,.38);
  box-shadow: 0 0 0 1px rgba(54,209,220,.08), var(--shadow);
}

.jp{
  font-size:22px;
  font-weight:900;
  letter-spacing:.5px;
  color:var(--accent2);
}
.hira{
  margin-top:6px;
  color:var(--muted);
  font-size:13px;
}
.mean{
  margin-top:8px;
  font-size:14px;
  color:var(--text);
  font-weight:600;
}

.badges{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  margin-top:10px;
}
.badge{
  font-size:11px;
  border:1px solid var(--border);
  padding:3px 8px;
  border-radius:999px;
  color:var(--muted);
}
.badge.n5{ border-color: rgba(52,211,153,.35); color: rgba(52,211,153,.95); }
.badge.n4{ border-color: rgba(123,92,255,.45); color: rgba(123,92,255,.95); }
.badge.tag{ border-color: rgba(54,209,220,.35); color: rgba(54,209,220,.95); }
.badge.exact{ border-color: rgba(54,209,220,.55); color: rgba(54,209,220,.95); }

.ex{
  margin-top:14px;
  padding-top:12px;
  border-top:1px solid rgba(255,255,255,.08);
}
.ex h4{
  margin:0 0 6px;
  font-size:13px;
  color:var(--accent2);
}
.exline{
  margin:10px 0 10px;
}
.exline b{ color:var(--text); }
.exline .k{ color:var(--accent2); }
.exp{
  color:var(--muted);
  font-size:13px;
  margin-top:6px;
}

.mini{
  display:inline-flex;
  align-items:center;
  gap:8px;
  margin-top:10px;
  flex-wrap:wrap;
}
.btn{
  cursor:pointer;
  border:1px solid var(--border);
  background: rgba(255,255,255,.05);
  color:var(--text);
  padding:8px 10px;
  border-radius:12px;
  font-size:12px;
  user-select:none;
}
.btn.primary{
  border-color: rgba(54,209,220,.35);
  background: rgba(54,209,220,.12);
}
.btn.danger{
  border-color: rgba(251,113,133,.35);
  background: rgba(251,113,133,.10);
}

.kanjigrid{
  display:grid;
  grid-template-columns:repeat(auto-fill, minmax(92px, 1fr));
  gap:12px;
  margin-top:12px;
}
.kanjiitem{
  background: rgba(255,255,255,.06);
  border:1px solid var(--border);
  border-radius: 16px;
  padding:12px 10px;
  text-align:center;
  cursor:pointer;
  transition: transform .12s ease, border-color .2s ease;
}
.kanjiitem:hover{
  transform: translateY(-1px);
  border-color: rgba(54,209,220,.28);
}
.kanjiitem .k{
  font-size:28px;
  font-weight:900;
  color:var(--accent2);
}
.kanjiitem .lvl{
  margin-top:6px;
  font-size:11px;
  color:var(--muted);
}
.kanjiitem .lvl b{
  color:var(--text);
}
.footer{
  text-align:center;
  padding:40px 0 0;
  color:var(--muted);
  font-size:12px;
}
hr.sep{
  border:none;
  border-top:1px solid rgba(255,255,255,.08);
  margin:14px 0;
}
.small{
  color:var(--muted);
  font-size:13px;
}
.small b{ color:var(--text); }
</style>
</head>

<body>

<header>
  <div class="topbar">
    <div class="brand">
      <div class="t">„É¥„Ç°„É≥„Éë„Ç§„Ç¢ÂÖ®Áü•ÂÖ®ËÉΩ ËæûÂÖ∏</div>
      <div class="s">
        „É¥„Ç°„É≥„Éë„Ç§„Ç¢ = vampiro <span>Ôºàobservador eternoÔºâ</span> / ÂÖ®Áü• = onisciente / ÂÖ®ËÉΩ = onipotente
      </div>
    </div>

    <nav>
      <div class="tabbtn active" id="tab-dic" onclick="openTab('dic')">üìñ Dicion√°rio</div>
      <div class="tabbtn" id="tab-kanji" onclick="openTab('kanji')">üà∂ Kanji (N5‚ÜíN4)</div>
      <div class="tabbtn" id="tab-about" onclick="openTab('about')">‚ÑπÔ∏è Sobre</div>
    </nav>
  </div>
</header>

<div class="container">

  <!-- ====================== DICION√ÅRIO ====================== -->
  <section id="dic" class="section active">
    <div class="grid">
      <div class="panel">
        <div class="row">
          <div>
            <h2>Dicion√°rio (JP ‚Üí PT-BR)</h2>
            <p class="hint">Busca ‚Äúcerta‚Äù: resultado exato primeiro. Aceita kanji/kana/portugu√™s. Ex.: È£ü„Åπ„Çã / „Åí„Çì„Åç / ‚Äúatrasar‚Äù.</p>
          </div>
          <label class="toggle" title="Se ligar, s√≥ mostra a entrada exata quando existir.">
            <input type="checkbox" id="onlyExact" />
            mostrar s√≥ exato (quando houver)
          </label>
        </div>

        <div class="searchbox">
          <input id="q" type="text" placeholder="Buscar palavra..." autocomplete="off" />
          <div class="btn danger" onclick="clearSearch()">Limpar</div>
        </div>

        <div id="results"></div>
      </div>

      <div class="panel">
        <h2>Como estudar (m√©todo simples)</h2>
        <p class="small">
          1) Busque a palavra ‚Üí confirme leitura e significado.<br>
          2) Leia as 3 frases (Japon√™s ‚Üí hiragana ‚Üí PT).<br>
          3) Repare nas estruturas fixas na explica√ß√£o.<br>
          4) Fa√ßa varia√ß√µes trocando s√≥ um elemento (tempo, lugar, objeto).<br>
        </p>
        <hr class="sep">
        <div class="mini">
          <div class="btn primary" onclick="randomWord()">Palavra aleat√≥ria</div>
          <div class="btn" onclick="openTab('kanji')">Ver kanji (N5‚ÜíN4)</div>
        </div>
        <hr class="sep">
        <p class="small">
          <b>Meta 2000:</b> este site j√° est√° pronto para isso. Voc√™ s√≥ vai adicionando itens no array <b>WORDS</b>.
        </p>
      </div>
    </div>
  </section>

  <!-- ====================== KANJI LISTA ====================== -->
  <section id="kanji" class="section">
    <div class="panel">
      <h2>Kanji ‚Äî ordem N5 ‚Üí N4</h2>
      <p class="hint">Clique em um kanji para abrir o Dicion√°rio e buscar automaticamente.</p>
      <div class="kanjigrid" id="kanjigrid"></div>
    </div>
  </section>

  <!-- ====================== SOBRE ====================== -->
  <section id="about" class="section">
    <div class="panel">
      <h2>Sobre ‚Äî „É¥„Ç°„É≥„Éë„Ç§„Ç¢ÂÖ®Áü•ÂÖ®ËÉΩ</h2>
      <p class="small">
        Este dicion√°rio √© parte do projeto <b>„É¥„Ç°„É≥„Éë„Ç§„Ç¢ÂÖ®Áü•ÂÖ®ËÉΩ</b>.<br>
        Aqui o foco √© estudo real do cotidiano (N5‚ÜíN4): <b>palavra ‚Üí 3 frases ‚Üí explica√ß√£o detalhada em PT-BR</b>.<br><br>
        ‚ÄúVampiro‚Äù √© met√°fora do observador que coleta padr√µes e n√£o deixa nada escapar.<br>
        ‚ÄúÂÖ®Áü•ÂÖ®ËÉΩ‚Äù representa disciplina: aprender com m√©todo, consist√™ncia e contexto.
      </p>
      <hr class="sep">
      <p class="small">
        Conte√∫do, estrutura e identidade: <b>„É¥„Ç°„É≥„Éë„Ç§„Ç¢ÂÖ®Áü•ÂÖ®ËÉΩ</b> ‚Äî vers√£o web de estudo profundo.
      </p>
    </div>
  </section>

  <div class="footer">„É¥„Ç°„É≥„Éë„Ç§„Ç¢ÂÖ®Áü•ÂÖ®ËÉΩ ¬© 2025 ‚Äî ËæûÂÖ∏ / Kanji / Estudo do cotidiano</div>
</div>

<script>
/* =========================
   DADOS: PALAVRAS (DICION√ÅRIO)
   Meta 2000: voc√™ s√≥ vai adicionando aqui (ou em lotes).
   ========================= */
const WORDS = [
  /* ===== Base inicial (voc√™ j√° tinha) ===== */
  {
    jp:"È£ü„Åπ„Çã",
    hira:"„Åü„Åπ„Çã",
    tipo:"verbo (ichidan)",
    mean:"comer",
    tags:["N5","cotidiano"],
    examples:[
      {
        jp:"Êúù„Åî„ÅØ„Çì„ÇíÈ£ü„Åπ„Åæ„Åó„Åü„ÄÇ",
        hira:"„ÅÇ„Åï„Åî„ÅØ„Çì „Çí „Åü„Åπ„Åæ„Åó„Åü„ÄÇ",
        pt:"Comi caf√© da manh√£.",
        exp:"Êúù„Åî„ÅØ„Çì = caf√© da manh√£; „Çí marca objeto; „Äú„Åæ„Åó„Åü = passado polido."
      },
      {
        jp:"‰Ωï„ÇíÈ£ü„Åπ„Åü„ÅÑ„Åß„Åô„ÅãÔºü",
        hira:"„Å™„Å´ „Çí „Åü„Åπ„Åü„ÅÑ „Åß„Åô „ÅãÔºü",
        pt:"O que voc√™ quer comer?",
        exp:"„Äú„Åü„ÅÑ = querer; „Åß„Åô„Åã = pergunta educada."
      },
      {
        jp:"Âèã„Å†„Å°„Å®Êòº„Åî„ÅØ„Çì„ÇíÈ£ü„Åπ„Å´Ë°å„Åç„Åæ„Åô„ÄÇ",
        hira:"„Å®„ÇÇ„Å†„Å° „Å® „Å≤„Çã„Åî„ÅØ„Çì „Çí „Åü„Åπ „Å´ „ÅÑ„Åç„Åæ„Åô„ÄÇ",
        pt:"Vou almo√ßar com um amigo.",
        exp:"V„Åæ„Åô-stem + „Å´Ë°å„Åè = ir para fazer algo (Ë¶ã„Å´Ë°å„Åè / È£ü„Åπ„Å´Ë°å„Åè)."
      }
    ]
  },
  {
    jp:"ÂÖÉÊ∞ó",
    hira:"„Åí„Çì„Åç",
    tipo:"„Å™-adjetivo / substantivo",
    mean:"bem, saud√°vel, animado",
    tags:["N5","cotidiano"],
    examples:[
      {
        jp:"ÂÖÉÊ∞ó„Åß„Åô„ÅãÔºü",
        hira:"„Åí„Çì„Åç „Åß„Åô „ÅãÔºü",
        pt:"Tudo bem?",
        exp:"Pergunta padr√£o. „Åß„Åô + „Åã = pergunta educada."
      },
      {
        jp:"‰ªäÊó•„ÅØÂÖÉÊ∞ó„Åå„Å™„ÅÑ„Å≠„ÄÇ",
        hira:"„Åç„Çá„ÅÜ „ÅØ „Åí„Çì„Åç „Åå „Å™„ÅÑ „Å≠„ÄÇ",
        pt:"Hoje voc√™ n√£o parece bem.",
        exp:"„Äú„Åå„Å™„ÅÑ = n√£o ter (energia/√¢nimo). „Å≠ suaviza e pede concord√¢ncia."
      },
      {
        jp:"Â≠ê„Å©„ÇÇ„Åü„Å°„ÅØÂÖÉÊ∞ó„Å´Ëµ∞„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ",
        hira:"„Åì„Å©„ÇÇ„Åü„Å° „ÅØ „Åí„Çì„Åç „Å´ „ÅØ„Åó„Å£„Å¶ „ÅÑ„Åæ„Åô„ÄÇ",
        pt:"As crian√ßas est√£o correndo cheias de energia.",
        exp:"ÂÖÉÊ∞ó„Å´ = adv√©rbio ('com energia'); „Äú„Å¶„ÅÑ„Çã = a√ß√£o em andamento."
      }
    ]
  },
  {
    jp:"Â§ß‰∏àÂ§´",
    hira:"„Å†„ÅÑ„Åò„Çá„ÅÜ„Å∂",
    tipo:"„Å™-adjetivo / express√£o",
    mean:"tudo bem; tranquilo; sem problemas",
    tags:["N5","cotidiano"],
    examples:[
      {
        jp:"Â§ß‰∏àÂ§´„Åß„Åô„ÅãÔºü",
        hira:"„Å†„ÅÑ„Åò„Çá„ÅÜ„Å∂ „Åß„Åô „ÅãÔºü",
        pt:"Voc√™ est√° bem?",
        exp:"Serve para sa√∫de, situa√ß√£o e tamb√©m entendimento ('entendeu?')."
      },
      {
        jp:"Â§ß‰∏àÂ§´„ÄÅÈñì„Å´Âêà„ÅÜ„Çà„ÄÇ",
        hira:"„Å†„ÅÑ„Åò„Çá„ÅÜ„Å∂„ÄÅ„Åæ„Å´„ÅÇ„ÅÜ „Çà„ÄÇ",
        pt:"Tranquilo, vai dar tempo.",
        exp:"Èñì„Å´Âêà„ÅÜ = dar tempo/chegar a tempo; „Çà = afirma√ß√£o confiante."
      },
      {
        jp:"„Åì„ÅÆÊúç„ÅßÂ§ß‰∏àÂ§´Ôºü",
        hira:"„Åì„ÅÆ „Åµ„Åè „Åß „Å†„ÅÑ„Åò„Çá„ÅÜ„Å∂Ôºü",
        pt:"Essa roupa t√° ok assim?",
        exp:"„Åß = condi√ß√£o/estado ('com isso'); pergunta casual."
      }
    ]
  },
  {
    jp:"Ë¶ã„Çã",
    hira:"„Åø„Çã",
    tipo:"verbo (ichidan)",
    mean:"ver; assistir; olhar",
    tags:["N5","cotidiano"],
    examples:[
      {
        jp:"„ÉÜ„É¨„Éì„ÇíË¶ã„Åæ„Åô„ÄÇ",
        hira:"„Å¶„Çå„Å≥ „Çí „Åø„Åæ„Åô„ÄÇ",
        pt:"Assisto TV.",
        exp:"„Çí marca o objeto; „Åæ„Åô = polidez."
      },
      {
        jp:"Êò†Áîª„ÇíË¶ã„Å´Ë°å„Åç„Åæ„Åô„ÄÇ",
        hira:"„Åà„ÅÑ„Åå „Çí „Åø „Å´ „ÅÑ„Åç„Åæ„Åô„ÄÇ",
        pt:"Vou assistir um filme (vou ao cinema).",
        exp:"V„Åæ„Åô-stem + „Å´Ë°å„Åè = ir para fazer algo (Ë¶ã„Åæ„Åô‚ÜíË¶ã)."
      },
      {
        jp:"„Å°„Çá„Å£„Å®Ë¶ã„Å¶„ÇÇ„ÅÑ„ÅÑ„Åß„Åô„ÅãÔºü",
        hira:"„Å°„Çá„Å£„Å® „Åø„Å¶„ÇÇ „ÅÑ„ÅÑ „Åß„Åô „ÅãÔºü",
        pt:"Posso dar uma olhada?",
        exp:"„Äú„Å¶„ÇÇ„ÅÑ„ÅÑ„Åß„Åô„Åã = pedir permiss√£o; „Å°„Çá„Å£„Å® suaviza o pedido."
      }
    ]
  },

  /* ===== MUITO MAIS (bloco grande) ===== */
  {
    jp:"Ë°å„Åè",
    hira:"„ÅÑ„Åè",
    tipo:"verbo (godan)",
    mean:"ir",
    tags:["N5","cotidiano"],
    examples:[
      { jp:"„Åì„Çå„Åã„ÇâÈßÖ„Å´Ë°å„Åç„Åæ„Åô„ÄÇ", hira:"„Åì„Çå„Åã„Çâ „Åà„Åç „Å´ „ÅÑ„Åç„Åæ„Åô„ÄÇ", pt:"Agora vou para a esta√ß√£o.", exp:"„Åì„Çå„Åã„Çâ = a partir de agora; „Å´ = destino; „Åæ„Åô = polido." },
      { jp:"ÈÄ±Êú´„ÄÅÂèã„Å†„Å°„Å®Ë≤∑„ÅÑÁâ©„Å´Ë°å„Åè„ÄÇ", hira:"„Åó„ÇÖ„ÅÜ„Åæ„Å§„ÄÅ„Å®„ÇÇ„Å†„Å° „Å® „Åã„ÅÑ„ÇÇ„ÅÆ „Å´ „ÅÑ„Åè„ÄÇ", pt:"No fim de semana, vou fazer compras com um amigo.", exp:"N + „Å´Ë°å„Åè = ir para fazer algo; tom casual sem „Åæ„Åô." },
      { jp:"„ÅÇ„Å®„ÅßË°å„Å£„Å¶„ÇÇ„ÅÑ„ÅÑÔºü", hira:"„ÅÇ„Å®„Åß „ÅÑ„Å£„Å¶„ÇÇ „ÅÑ„ÅÑÔºü", pt:"Posso ir mais tarde?", exp:"„Äú„Å¶„ÇÇ„ÅÑ„ÅÑÔºü = pedir permiss√£o (casual)." }
    ]
  },
  {
    jp:"Â∏∞„Çã",
    hira:"„Åã„Åà„Çã",
    tipo:"verbo (godan)",
    mean:"voltar (para casa, etc.)",
    tags:["N5","cotidiano"],
    examples:[
      { jp:"‰ªäÊó•„ÅØÊó©„ÅèÂ∏∞„Çä„Åæ„Åô„ÄÇ", hira:"„Åç„Çá„ÅÜ „ÅØ „ÅØ„ÇÑ„Åè „Åã„Åà„Çä„Åæ„Åô„ÄÇ", pt:"Hoje volto cedo.", exp:"Êó©„Åè = cedo/r√°pido (adv√©rbio); rotina." },
      { jp:"ÂÆ∂„Å´Â∏∞„Å£„Åü„Çâ„ÄÅ„Åô„Åê„Ç∑„É£„ÉØ„Éº„ÇíÊµ¥„Å≥„Çã„ÄÇ", hira:"„ÅÑ„Åà „Å´ „Åã„Åà„Å£„Åü„Çâ„ÄÅ„Åô„Åê „Åó„ÇÉ„Çè„Éº „Çí „ÅÇ„Å≥„Çã„ÄÇ", pt:"Quando eu chegar em casa, tomo banho na hora.", exp:"„Äú„Åü„Çâ = quando/assim que; „Åô„Åê = imediatamente." },
      { jp:"‰ΩïÊôÇ„Å´Â∏∞„Å£„Å¶„Åè„ÇãÔºü", hira:"„Å™„Çì„Åò „Å´ „Åã„Åà„Å£„Å¶„Åè„ÇãÔºü", pt:"Que horas voc√™ volta?", exp:"„Äú„Å¶„Åè„Çã = voltar vindo; pergunta cotidiana." }
    ]
  },
  {
    jp:"‰ºë„ÇÄ",
    hira:"„ÇÑ„Åô„ÇÄ",
    tipo:"verbo (godan)",
    mean:"descansar; faltar",
    tags:["N5","cotidiano"],
    examples:[
      { jp:"‰ªäÊó•„ÅØ‰ΩìË™ø„ÅåÊÇ™„ÅÑ„ÅÆ„Åß‰ºë„Åø„Åæ„Åô„ÄÇ", hira:"„Åç„Çá„ÅÜ „ÅØ „Åü„ÅÑ„Å°„Çá„ÅÜ „Åå „Çè„Çã„ÅÑ „ÅÆ„Åß „ÇÑ„Åô„Åø„Åæ„Åô„ÄÇ", pt:"Hoje vou descansar porque n√£o estou bem.", exp:"„ÅÆ„Åß = motivo (mais neutro/objetivo)." },
      { jp:"Êó•ÊõúÊó•„ÅØ„ÇÜ„Å£„Åè„Çä‰ºë„Çì„Å†„ÄÇ", hira:"„Å´„Å°„Çà„ÅÜ„Å≥ „ÅØ „ÇÜ„Å£„Åè„Çä „ÇÑ„Åô„Çì„Å†„ÄÇ", pt:"Domingo eu descansei tranquilo.", exp:"„ÇÜ„Å£„Åè„Çä = devagar/relaxado; passado casual." },
      { jp:"ÊòéÊó•„ÄÅ‰ªï‰∫ã„Çí‰ºë„Çì„Åß„ÇÇ„ÅÑ„ÅÑ„Åß„Åô„Åã„ÄÇ", hira:"„ÅÇ„Åó„Åü„ÄÅ„Åó„Åî„Å® „Çí „ÇÑ„Åô„Çì„Åß„ÇÇ „ÅÑ„ÅÑ „Åß„Åô„Åã„ÄÇ", pt:"Amanh√£ posso faltar ao trabalho?", exp:"„Äú„Å¶„ÇÇ„ÅÑ„ÅÑ„Åß„Åô„Åã = pedir permiss√£o (polido)." }
    ]
  },
  {
    jp:"Âøô„Åó„ÅÑ",
    hira:"„ÅÑ„Åù„Åå„Åó„ÅÑ",
    tipo:"„ÅÑ-adjetivo",
    mean:"ocupado; corrido",
    tags:["N4","cotidiano"],
    examples:[
      { jp:"ÊúÄËøë„ÄÅ‰ªï‰∫ã„ÅåÂøô„Åó„ÅÑ„Åß„Åô„ÄÇ", hira:"„Åï„ÅÑ„Åç„Çì„ÄÅ„Åó„Åî„Å® „Åå „ÅÑ„Åù„Åå„Åó„ÅÑ „Åß„Åô„ÄÇ", pt:"Ultimamente o trabalho est√° corrido.", exp:"ÊúÄËøë = ultimamente; padr√£o muito comum." },
      { jp:"Âøô„Åó„Åè„Å¶„ÄÅËøî‰ø°„ÅåÈÅÖ„Çå„Åæ„Åó„Åü„ÄÇ", hira:"„ÅÑ„Åù„Åå„Åó„Åè„Å¶„ÄÅ„Å∏„Çì„Åó„Çì „Åå „Åä„Åè„Çå„Åæ„Åó„Åü„ÄÇ", pt:"Eu estava ocupado e a resposta atrasou.", exp:"„Äú„Åè„Å¶ = causa; ÈÅÖ„Çå„Çã = atrasar." },
      { jp:"‰ªäÊó•„ÅØÂøô„Åó„Åù„ÅÜ„Å†„Å≠„ÄÇ", hira:"„Åç„Çá„ÅÜ „ÅØ „ÅÑ„Åù„Åå„Åó„Åù„ÅÜ „Å†„Å≠„ÄÇ", pt:"Hoje voc√™ parece ocupado.", exp:"„Äú„Åù„ÅÜ = apar√™ncia; „Å†„Å≠ = conversa." }
    ]
  },
  {
    jp:"ÈÅÖ„Çå„Çã",
    hira:"„Åä„Åè„Çå„Çã",
    tipo:"verbo (ichidan)",
    mean:"atrasar-se; atrasar",
    tags:["N4","cotidiano"],
    examples:[
      { jp:"„Åî„ÇÅ„Çì„ÄÅÂ∞ë„ÅóÈÅÖ„Çå„Çã„ÄÇ", hira:"„Åî„ÇÅ„Çì„ÄÅ„Åô„Åì„Åó „Åä„Åè„Çå„Çã„ÄÇ", pt:"Foi mal, vou me atrasar um pouco.", exp:"Frase de mensagem real. „Åô„Åì„Åó = um pouco." },
      { jp:"ÈõªËªä„ÅåÈÅÖ„Çå„Å¶„ÅÑ„Çã„ÄÇ", hira:"„Åß„Çì„Åó„ÇÉ „Åå „Åä„Åè„Çå„Å¶„ÅÑ„Çã„ÄÇ", pt:"O trem est√° atrasado.", exp:"„Äú„Å¶„ÅÑ„Çã = estado atual (est√° atrasado agora)." },
      { jp:"ÈÄ£Áµ°„ÅåÈÅÖ„Çå„Å¶„Åô„Åø„Åæ„Åõ„Çì„ÄÇ", hira:"„Çå„Çì„Çâ„Åè „Åå „Åä„Åè„Çå„Å¶ „Åô„Åø„Åæ„Åõ„Çì„ÄÇ", pt:"Desculpa a demora em responder/avisar.", exp:"Express√£o padr√£o de e-mail/mensagem." }
    ]
  },
  {
    jp:"Èñì„Å´Âêà„ÅÜ",
    hira:"„Åæ„Å´„ÅÇ„ÅÜ",
    tipo:"verbo (godan)",
    mean:"dar tempo; chegar a tempo",
    tags:["N4","cotidiano"],
    examples:[
      { jp:"ÊÄ•„Åí„Å∞Èñì„Å´Âêà„ÅÜ„Çà„ÄÇ", hira:"„ÅÑ„Åù„Åí„Å∞ „Åæ„Å´„ÅÇ„ÅÜ „Çà„ÄÇ", pt:"Se correr, d√° tempo.", exp:"„Äú„Å∞ = condicional; „Çà = garante/assegura." },
      { jp:"ÊôÇÈñì„Å´Èñì„Å´Âêà„Çè„Å™„Åã„Å£„Åü„ÄÇ", hira:"„Åò„Åã„Çì „Å´ „Åæ„Å´„ÅÇ„Çè„Å™„Åã„Å£„Åü„ÄÇ", pt:"N√£o deu tempo.", exp:"Forma negativa passada casual." },
      { jp:"„Åì„ÅÆÈõªËªä„Å´‰πó„Çå„Å∞Èñì„Å´Âêà„ÅÑ„Åæ„Åô„ÄÇ", hira:"„Åì„ÅÆ „Åß„Çì„Åó„ÇÉ „Å´ „ÅÆ„Çå„Å∞ „Åæ„Å´„ÅÇ„ÅÑ„Åæ„Åô„ÄÇ", pt:"Se pegar esse trem, d√° tempo.", exp:"Estrutura bem pr√°tica: ‰πó„Çå„Å∞ + Èñì„Å´Âêà„ÅÜ." }
    ]
  },
  {
    jp:"ÂøÖË¶Å",
    hira:"„Å≤„Å§„Çà„ÅÜ",
    tipo:"„Å™-adjetivo / substantivo",
    mean:"necess√°rio",
    tags:["N4","cotidiano"],
    examples:[
      { jp:"„Éë„Çπ„Éù„Éº„Éà„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ", hira:"„Å±„Åô„ÅΩ„Éº„Å® „Åå „Å≤„Å§„Çà„ÅÜ „Åß„Åô„ÄÇ", pt:"Precisa de passaporte.", exp:"„Åå = sujeito/necessidade; padr√£o de instru√ß√£o." },
      { jp:"ÂøÖË¶Å„Å™„Çâ„ÄÅÊâã‰ºù„ÅÑ„Åæ„Åô„ÄÇ", hira:"„Å≤„Å§„Çà„ÅÜ „Å™„Çâ„ÄÅ„Å¶„Å§„Å†„ÅÑ„Åæ„Åô„ÄÇ", pt:"Se precisar, eu ajudo.", exp:"„Å™„Çâ = se for o caso; oferta natural." },
      { jp:"„Åù„Çå„ÅØÂøÖË¶Å„Å™„ÅÑ„Å®ÊÄù„ÅÜ„ÄÇ", hira:"„Åù„Çå „ÅØ „Å≤„Å§„Çà„ÅÜ „Å™„ÅÑ „Å® „Åä„ÇÇ„ÅÜ„ÄÇ", pt:"Acho que isso n√£o √© necess√°rio.", exp:"ÂøÖË¶Å„Å™„ÅÑ = n√£o precisar; „Å®ÊÄù„ÅÜ = acho que." }
    ]
  },
  {
    jp:"‰æøÂà©",
    hira:"„Åπ„Çì„Çä",
    tipo:"„Å™-adjetivo",
    mean:"conveniente; pr√°tico",
    tags:["N4","cotidiano"],
    examples:[
      { jp:"„Åì„ÅÆ„Ç¢„Éó„É™„ÅØ‰æøÂà©„Åß„Åô„ÄÇ", hira:"„Åì„ÅÆ „ÅÇ„Å∑„Çä „ÅØ „Åπ„Çì„Çä „Åß„Åô„ÄÇ", pt:"Esse app √© pr√°tico.", exp:"Frase cotidiana de avalia√ß√£o." },
      { jp:"ÈßÖ„ÅÆËøë„Åè„ÅØ‰æøÂà©„Å†„Çà„ÄÇ", hira:"„Åà„Åç „ÅÆ „Å°„Åã„Åè „ÅØ „Åπ„Çì„Çä „Å†„Çà„ÄÇ", pt:"Perto da esta√ß√£o √© conveniente.", exp:"„Å†„Çà = casual afirmativo." },
      { jp:"‰æøÂà©„Å†„Åë„Å©„ÄÅÂ∞ë„ÅóÈ´ò„ÅÑ„ÄÇ", hira:"„Åπ„Çì„Çä „Å†„Åë„Å©„ÄÅ„Åô„Åì„Åó „Åü„Åã„ÅÑ„ÄÇ", pt:"√â pr√°tico, mas √© um pouco caro.", exp:"„Å†„Åë„Å© = mas (casual)." }
    ]
  },

  /* ===== Entrada kanji como item (para buscar por 1 kanji tamb√©m) ===== */
  {
    jp:"ËÄÉ",
    hira:"„Åã„Çì„Åå„Éª„Åà„ÇãÔºàËÄÉ„Åà„ÇãÔºâ",
    tipo:"kanji / verbo relacionado",
    mean:"pensar; refletir",
    tags:["N4","kanji"],
    examples:[
      { jp:"Â∞ÜÊù•„Å´„Å§„ÅÑ„Å¶ËÄÉ„Åà„Çã„ÄÇ", hira:"„Åó„Çá„ÅÜ„Çâ„ÅÑ „Å´ „Å§„ÅÑ„Å¶ „Åã„Çì„Åå„Åà„Çã„ÄÇ", pt:"Pensar sobre o futuro.", exp:"„Äú„Å´„Å§„ÅÑ„Å¶ = sobre; padr√£o de tema." },
      { jp:"„Çà„ÅèËÄÉ„Åà„Å¶„Åã„ÇâÁ≠î„Åà„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ", hira:"„Çà„Åè „Åã„Çì„Åå„Åà„Å¶ „Åã„Çâ „Åì„Åü„Åà„Å¶ „Åè„Å†„Åï„ÅÑ„ÄÇ", pt:"Pense bem antes de responder, por favor.", exp:"„Äú„Å¶„Åã„Çâ = depois de; „Åè„Å†„Åï„ÅÑ = pedido." },
      { jp:"‰∏Ä‰∫∫„ÅßËÄÉ„ÅàËæº„Çì„Åß„Åó„Åæ„Å£„Åü„ÄÇ", hira:"„Å≤„Å®„Çä „Åß „Åã„Çì„Åå„Åà„Åì„Çì„Åß „Åó„Åæ„Å£„Åü„ÄÇ", pt:"Acabei ficando pensando sozinho (demais).", exp:"ËÄÉ„ÅàËæº„ÇÄ = pensar profundamente; „Äú„Å¶„Åó„Åæ„ÅÜ = acabou acontecendo." }
    ]
  }
];

/* =========================
   DADOS: KANJI (ORDEM N5‚ÜíN4)
   ========================= */
const KANJI_ORDER = [
  // N5
  {k:"Êó•", lvl:"N5"},{k:"‰∏Ä", lvl:"N5"},{k:"‰∫∫", lvl:"N5"},{k:"Â§ß", lvl:"N5"},{k:"Êú¨", lvl:"N5"},
  {k:"‰∏≠", lvl:"N5"},{k:"Â≠¶", lvl:"N5"},{k:"Ë°å", lvl:"N5"},{k:"Ë¶ã", lvl:"N5"},{k:"È£ü", lvl:"N5"},
  {k:"È£≤", lvl:"N5"},{k:"Êù•", lvl:"N5"},{k:"Ë®Ä", lvl:"N5"},{k:"ÊÄù", lvl:"N5"},{k:"‰ºö", lvl:"N5"},
  {k:"‰ªä", lvl:"N5"},{k:"Âêç", lvl:"N5"},{k:"Ë©±", lvl:"N5"},{k:"‰Ωï", lvl:"N5"},{k:"Ëªä", lvl:"N5"},
  {k:"ÂÖà", lvl:"N5"},{k:"Âèã", lvl:"N5"},{k:"Êõ∏", lvl:"N5"},{k:"Ë™≠", lvl:"N5"},{k:"ËÅû", lvl:"N5"},
  {k:"Ë≤∑", lvl:"N5"},{k:"Êñ∞", lvl:"N5"},{k:"ÊôÇ", lvl:"N5"},{k:"‰Ωè", lvl:"N5"},

  // N4 (amostra; voc√™ vai aumentando)
  {k:"ËÄÉ", lvl:"N4"},{k:"Á∂ö", lvl:"N4"},{k:"Âõ∞", lvl:"N4"},{k:"Ê±∫", lvl:"N4"},{k:"‰∫à", lvl:"N4"},
  {k:"Â§â", lvl:"N4"},{k:"ÈÅÖ", lvl:"N4"},{k:"Âøò", lvl:"N4"},{k:"Ëøî", lvl:"N4"},{k:"Áõ¥", lvl:"N4"},
  {k:"ÁΩÆ", lvl:"N4"},{k:"Ëµ∑", lvl:"N4"},{k:"Áú†", lvl:"N4"},{k:"‰πó", lvl:"N4"},{k:"Èôç", lvl:"N4"}
];

/* =========================
   L√ìGICA DO SITE
   ========================= */
const sections = {
  dic: document.getElementById("dic"),
  kanji: document.getElementById("kanji"),
  about: document.getElementById("about")
};

const tabs = {
  dic: document.getElementById("tab-dic"),
  kanji: document.getElementById("tab-kanji"),
  about: document.getElementById("tab-about")
};

const q = document.getElementById("q");
const results = document.getElementById("results");
const kanjigrid = document.getElementById("kanjigrid");
const onlyExactEl = document.getElementById("onlyExact");

function openTab(id){
  Object.values(sections).forEach(s=>s.classList.remove("active"));
  sections[id].classList.add("active");

  Object.values(tabs).forEach(t=>t.classList.remove("active"));
  tabs[id].classList.add("active");

  if(id === "kanji") renderKanjiGrid();
  if(id === "dic") setTimeout(()=>q.focus(), 0);
}

function normalize(s){
  return (s ?? "")
    .toString()
    .trim()
    .toLowerCase()
    // remove espa√ßos japoneses/ocidentais e pontua√ß√µes comuns
    .replace(/[\s„ÄÄ]+/g, "")
    .replace(/[„ÄÇ„ÄÅÔºå,.!?ÔºÅÔºü„Äå„Äç„Äé„ÄèÔºàÔºâ()„Äê„Äë\[\]""'‚Äô]/g, "");
}

function isExactHeadword(word, queryNorm){
  const jp = normalize(word.jp);
  const hira = normalize(word.hira);
  const mean = normalize(word.mean);
  return (jp && jp === queryNorm) || (hira && hira === queryNorm) || (mean && mean === queryNorm);
}

function scoreWord(word, queryNorm){
  // Scores altos = vem primeiro.
  const jp = normalize(word.jp);
  const hira = normalize(word.hira);
  const mean = normalize(word.mean);

  // 1) Exato na entrada
  if(jp === queryNorm) return 1000;
  if(hira === queryNorm) return 950;
  if(mean === queryNorm) return 900;

  // 2) Come√ßa com‚Ä¶
  if(jp.startsWith(queryNorm)) return 780;
  if(hira.startsWith(queryNorm)) return 740;
  if(mean.startsWith(queryNorm)) return 700;

  // 3) Cont√©m‚Ä¶
  if(jp.includes(queryNorm)) return 520;
  if(hira.includes(queryNorm)) return 500;
  if(mean.includes(queryNorm)) return 480;

  // 4) Procura nos exemplos (mais fraco)
  const ex = (word.examples || []);
  let best = 0;
  for(const e of ex){
    const ejp = normalize(e.jp);
    const ehira = normalize(e.hira);
    const ept = normalize(e.pt);
    if(ejp === queryNorm || ehira === queryNorm || ept === queryNorm) best = Math.max(best, 360);
    else if(ejp.includes(queryNorm) || ehira.includes(queryNorm) || ept.includes(queryNorm)) best = Math.max(best, 220);
  }

  // 5) Tags/Tipo
  const tags = (word.tags || []).map(normalize);
  const tipo = normalize(word.tipo);
  if(tags.some(t => t.includes(queryNorm))) best = Math.max(best, 180);
  if(tipo.includes(queryNorm)) best = Math.max(best, 160);

  return best;
}

function clearSearch(){
  q.value = "";
  renderResults("");
  q.focus();
}

function randomWord(){
  if(!WORDS.length) return;
  const pick = WORDS[Math.floor(Math.random() * WORDS.length)];
  q.value = pick.jp;
  renderResults(pick.jp);
}

function renderResults(query){
  const raw = (query ?? q.value).trim();
  results.innerHTML = "";

  if(!raw){
    results.innerHTML = `<div class="card"><div class="mean" style="color:var(--muted)">Digite algo para buscar. Ex.: È£ü„Åπ„Çã / „Åí„Çì„Åç / ‚Äúatrasar‚Äù.</div></div>`;
    return;
  }

  const qNorm = normalize(raw);

  // rankeia e filtra
  const ranked = WORDS
    .map(w => ({ w, s: scoreWord(w, qNorm) }))
    .filter(x => x.s > 0)
    .sort((a,b) => b.s - a.s);

  if(ranked.length === 0){
    results.innerHTML = `<div class="card"><div class="mean">Nenhum resultado para ‚Äú${escapeHtml(raw)}‚Äù.</div><div class="hira">Dica: tente kana („Å≤„Çâ„Åå„Å™), kanji, ou portugu√™s.</div></div>`;
    return;
  }

  // Se existe resultado exato na entrada (jp/hira/mean), destaca.
  const exact = ranked.filter(x => isExactHeadword(x.w, qNorm));
  const nonExact = ranked.filter(x => !isExactHeadword(x.w, qNorm));

  const onlyExact = !!onlyExactEl.checked;
  const finalList = exact.length ? (onlyExact ? exact : [...exact, ...nonExact]) : ranked;

  // Cabe√ßalho de contexto
  const header = document.createElement("div");
  header.className = "card";
  header.innerHTML = `
    <div class="mean">
      Busca: <b>${escapeHtml(raw)}</b> ‚Äî resultados: <b>${finalList.length}</b>
      ${exact.length ? `&nbsp;&nbsp;<span class="badge exact">exato encontrado</span>` : ``}
    </div>
    <div class="hira">
      Dica: se quiser s√≥ a entrada exata, ative ‚Äúmostrar s√≥ exato (quando houver)‚Äù.
    </div>
  `;
  results.appendChild(header);

  // Render
  finalList.slice(0, 30).forEach((item, idx) => { // limite UI (o dataset pode ser 2000; renderiza top 30)
    const w = item.w;
    const isExact = isExactHeadword(w, qNorm);

    const levelBadges = (w.tags || []).map(t=>{
      const low = t.toLowerCase();
      if(low === "n5") return `<span class="badge n5">N5</span>`;
      if(low === "n4") return `<span class="badge n4">N4</span>`;
      return `<span class="badge tag">${escapeHtml(t)}</span>`;
    }).join("");

    const card = document.createElement("div");
    card.className = "card" + (isExact ? " exact" : "");
    card.innerHTML = `
      <div class="jp">${escapeHtml(w.jp)}</div>
      <div class="hira">${escapeHtml(w.hira || "‚Äî")}</div>
      <div class="mean">(${escapeHtml(w.tipo || "‚Äî")}) ‚Äî ${escapeHtml(w.mean || "‚Äî")}</div>
      <div class="badges">
        ${isExact ? `<span class="badge exact">resultado exato</span>` : ``}
        ${levelBadges}
      </div>
      ${renderExamples(w.examples || [])}
    `;
    results.appendChild(card);
  });

  // Se tiver mais, avisa
  if(finalList.length > 30){
    const more = document.createElement("div");
    more.className = "card";
    more.innerHTML = `
      <div class="mean">Mostrando os <b>30</b> melhores resultados (de ${finalList.length}).</div>
      <div class="hira">Para refinamento: digite mais espec√≠fico (ex.: „Åæ„Å´„ÅÇ„ÅÜ, Èñì„Å´Âêà„ÅÜ, ‚Äúnecess√°rio‚Äù).</div>
    `;
    results.appendChild(more);
  }
}

function renderExamples(examples){
  if(!examples.length){
    return `<div class="ex"><h4>Exemplos</h4><div class="exp">Sem exemplos ainda. (Adicione 3 aqui.)</div></div>`;
  }
  const exHtml = examples.slice(0,3).map((e, idx)=>`
    <div class="ex">
      <h4>Exemplo ${idx+1}</h4>
      <div class="exline">
        <b>${escapeHtml(e.jp)}</b><br>
        <span class="k">${escapeHtml(e.hira || "")}</span><br>
        ${escapeHtml(e.pt || "")}
      </div>
      <div class="exp"><b>Explica√ß√£o (PT-BR):</b> ${escapeHtml(e.exp || "")}</div>
    </div>
  `).join("");
  return exHtml;
}

function renderKanjiGrid(){
  kanjigrid.innerHTML = "";
  const rank = (lvl)=> lvl === "N5" ? 0 : 1;
  const list = [...KANJI_ORDER].sort((a,b)=> rank(a.lvl) - rank(b.lvl));

  list.forEach(item=>{
    const div = document.createElement("div");
    div.className = "kanjiitem";
    div.innerHTML = `
      <div class="k">${escapeHtml(item.k)}</div>
      <div class="lvl"><b>${escapeHtml(item.lvl)}</b> „Éª clique</div>
    `;
    div.addEventListener("click", ()=>{
      openTab("dic");
      q.value = item.k;
      renderResults(item.k);
      window.scrollTo({top:0, behavior:"smooth"});
    });
    kanjigrid.appendChild(div);
  });
}

function escapeHtml(str){
  return (str ?? "").toString()
    .replaceAll("&","&amp;")
    .replaceAll("<","&lt;")
    .replaceAll(">","&gt;")
    .replaceAll('"',"&quot;")
    .replaceAll("'","&#039;");
}

// Events
q.addEventListener("input", ()=> renderResults(q.value));
onlyExactEl.addEventListener("change", ()=> renderResults(q.value));

// init
renderResults("");
</script>

</body>
</html>
